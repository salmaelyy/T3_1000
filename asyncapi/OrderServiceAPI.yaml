asyncapi: 2.6.0
info:
  title: Order Service API
  version: 1.0.0
  description: API zur Verarbeitung von Bestellereignissen in Kafka
  contact:
    name: Support Team
    email: support@example.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  production:
    url: kafka-broker1.example.com:9092
    protocol: kafka
    description: Kafka-Cluster f端r Produktionsumgebung
    bindings:
      kafka:
        bindingVersion: '0.4.0'

channels:
  orders:
    description: Topic f端r Bestellereignisse
    subscribe:           # in v2.6.0 direkt am Channel (v3: operations/send/receive)
      message:
        $ref: '#/components/messages/OrderCreated'
    bindings:
      kafka:
        bindingVersion: '0.4.0'
        partitions: 3       # Partitionierungsstrategie
        topic: orders

components:
  messages:
    OrderCreated:
      name: OrderCreated
      title: Bestellung erzeugt
      payload:
        type: object
        properties:
          orderId:
            type: string
          customerId:
            type: string
      bindings:
        kafka:
          key:
            type: string
            description: Order-ID als Schl端ssel f端r Partitionierung
          headers:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
              source:
                type: string
                description: Herkunftssystem
